@inject PersonInf_Model ViewModel
@inject NavigationManager Navigation
@inject IJSRuntime JSRuntime
<CascadingValue Value="this">
    <EditForm Model="ViewModel" OnSubmit=@FormSubmitted>
        <div id="@Id">
            <ul class="nav nav-pills nav-justified">
                @foreach (var step in Steps)
                {
                    <li id="step-@(StepsIndex(step) + 1)" class="nav-item">
                        <a class="nav-link @((ActiveStep == step) ? "active" : "")" href="javascript: void(0)"
                           @onclick="@(e=> SetActive(step))">@step.Name</a>
                    </li>
                }
            </ul>
            <div id="container-fluid">
                @ChildContent
            </div>
        </div>
        <div class="btns">
            <button class="btn btn-primary btn-lg" type="button"
                    disabled="@(ActiveStepIx == 0)" @onclick="GoBack">
                Tilbake
            </button>
            <input @bind-value=ViewModel.submitted checked hidden type="radio" />
            <button class="btn btn-primary btn-lg"
                    type="@(IsLastStep ? "submit" : "button")" @onclick="GoNext">
                @(IsLastStep ? "Send inn" : "Neste")
            </button>
        </div>
    </EditForm>
</CascadingValue>

@code {
    void FormSubmitted()
    {
        ViewModel.submitted = true;
        Navigation.NavigateTo("/", forceLoad: true);
    }
    void GoNext()
    {
        GoNext(Navigation);
    }
}
